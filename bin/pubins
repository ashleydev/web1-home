#!/usr/bin/perl

use strict;

my $flag_path_interm;
my $path_interm = '/home/pubstock/interm';

my @param_collection;
my @files;

#foreach (@ARGV) {

if ($ARGV[0] =~ m/^(-i|--interm)$/) {
  $flag_path_interm = 1;
  () = shift(@ARGV);
}

my $file_interm = shift(@ARGV);
my $code = shift(@ARGV);

if ($flag_path_interm) {
  $file_interm = "$path_interm/$file_interm";
}

if ( -f $file_interm && $code ) {
  system("sudo -u pubstock /home/pubstock/perl/insertfile.pl '$file_interm' $code");
} else {
  print "Purpose: Front-end for inserting files into the interm page to be processed\n\n";
  print "\tEx: $0 (-i|--interm) [filename] [acct]\n\n";
}
